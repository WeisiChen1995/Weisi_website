<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-03-24">
<meta name="description" content="Murmurs Before Turning 30">

<title>About 【三十而立】 – Tangpai’s website</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-7ad6542725e80d1433b1f8ee26c2a1fc.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<!-- academic icons -->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

<!-- altmetric icons -->
<script type="text/javascript" src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>

<!-- fontawesome icons -->
<script src="https://kit.fontawesome.com/1392a7030f.js" crossorigin="anonymous"></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Tangpai’s website</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">My blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/WeisiChen1995/Weisi_website" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#about-三十而立" id="toc-about-三十而立" class="nav-link active" data-scroll-target="#about-三十而立">About [三十而立]…</a></li>
  <li><a href="#about-ptsd" id="toc-about-ptsd" class="nav-link" data-scroll-target="#about-ptsd">About [PTSD]…</a></li>
  <li><a href="#about-carer-transition" id="toc-about-carer-transition" class="nav-link" data-scroll-target="#about-carer-transition">About [Carer Transition]…</a></li>
  <li><a href="#about-this-blog" id="toc-about-this-blog" class="nav-link" data-scroll-target="#about-this-blog">About [This Blog]…</a></li>
  <li><a href="#about-一半人生" id="toc-about-一半人生" class="nav-link" data-scroll-target="#about-一半人生">About [一半人生]…</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">About 【三十而立】</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Random thoughts</div>
  </div>
  </div>

<div>
  <div class="description">
    Murmurs Before Turning 30
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="about-三十而立" class="level3">
<h3 class="anchored" data-anchor-id="about-三十而立">About [三十而立]…</h3>
<p>In Chinese culture, there is a saying: “三十而立”, which means that by the age of 30, a person should have established their career, family, and moral principles. This stage of life signifies financial stability and independence, allowing a person to stand on their own.</p>
<p>I only have a few months until I turn 30, and I am still trying to understand myself—figuring out my strengths and weaknesses and finding my true path, something I both somewhat enjoy and am good at. Three years ago, I finally made the move to transition my career, and I am so glad I did. Since then, life has had its ups and downs, and sometimes things haven’t worked out due to my knowledge, abilities, personality or other reasons. But I have no regrets. I always believe that every decision I make is the best one possible given the circumstances at the time. I always strive to do my best in everything I undertake in the present moment. Sometimes, things don’t work out because simply it wasn’t meant for me.</p>
<p>Nowadays, I often hear people on the internet praise the idea of <strong>“inner stability.”</strong> They say that true strength comes from within and that without it, we are left with only <em>internal friction</em>—something we must put an end to. However, over time, I’ve come to realize that stopping this internal friction often means sacrificing our sensitivity.</p>
<p>I find myself caught in this paradox:<br> You can be a highly sensitive and empathetic person, deeply attuned to the emotions of others, but also vulnerable to pain. Or, you can shield yourself from pain, becoming indifferent to both yourself and those around you—yet society will praise you for having a strong inner core.</p>
<p>So, what kind of person do I want to be? <br> That is a question I have asked myself for a long time. I think I still want to perceive everything—the beauty, the sorrow, the light, and the dark. So, I want to <strong>perceive pain and allow time to heal it</strong>…</p>
</section>
<section id="about-ptsd" class="level3">
<h3 class="anchored" data-anchor-id="about-ptsd">About [PTSD]…</h3>
<p>Sometime between 2017 and 2019, I had a major accident alone in Sydney. Funny enough, I usually remember the exact date of significant life events, but since I forced myself to <strong>try to</strong> erase this one from my memory, I eventually managed to forget the date. Ironically, though, while the date is erased, every detail of the event still lingers in my mind.</p>
<p>I remember blood everywhere. I remember people calling an ambulance—and how it took forever to arrive because they got lost. I remember feeling cold, shivering. I remember the countless morphine injections. I remember the hopelessness of lying on that hospital bed (didn’t even want to know which hospital I am at), waiting for surgery. Doctors and nurses came to me one by one, introducing themselves before disappearing again. I remember them asking, <em>“Do you have anyone to accompany you to surgery?”</em> And I said no. I remember being told, over and over, how lucky I was—how I had nearly lost my leg if I got hit just 1 cm further-Yes, that’s also one of the conversations I desperately want to erase. But I can’t.</p>
<p>After the surgery, everything felt surreal. Every morning when I woke up, I couldn’t believe it wasn’t just a bad dream—that it had really happened. I struggled to do even the simplest things alone. Going to the toilet, doing housework, taking a shower—every task felt like an uphill battle. I had to learn how to walk again. It took more than half a year’s struggle before I could do basic exercises and bend my knee properly. Every time I felt hopeless, my parents would comfort me, reminding me how fortunate I was—that I hadn’t lost my leg or become disabled. They said it so often that I started to feel guilty for still being depressed. <strong>So many people have far worse accidents than me—why couldn’t I just be grateful?</strong> I lost many friends during that time. Not because I wanted to push them away, but because I didn’t want to sound like a victim. Yet at the same time, I wasn’t strong enough to pretend I was okay.</p>
<p>Even after six or seven years, now that I am much calmer, I can finally write down this story for the first time—calmly, without crying. But the ever-present pain of the scar still reminds me of what I went through. And every time the physiotherapist massages my knee during a session, I still feel sick to my stomach. I often find myself avoiding anything that carries even the slightest risk—too many forms of exercise, even driving—because I just don’t feel safe. Every new pain, every “failure,” feels like another blow, hitting me harder each time.</p>
<p>A month ago, I reunited with an old friend of mine. She was my best friend in primary school, but we lost touch after going to different schools. She has always been one of the incredibly smart kids (which was later confirmed when she took an IQ test and scored high). I, on the other hand, could only achieve average grades no matter how hard I tried, while she effortlessly excelled in tests. Later, I heard she got into her dream school—Carnegie Mellon University in the U.S.—to study computer science. But then, she suddenly developed severe eye floaters and lost her central vision in both eyes. She had no choice but to drop out and spend a year in an eye hospital. After countless desperate days and nights, multiple treatments, and surgeries, she finally regained her eyesight. She then decided to move to Adelaide, Australia, seeking a more balanced and less stressful life compared to the U.S. Because of that, we were able to reunite from time to time.</p>
<p>I can sense that she is a bit <em>different</em> from others in the way she thinks and behaves. Surprisingly, I found that we share some of the same unusual thoughts and behaviors. There are many things I’ve felt <em>ashamed</em> to share with others—some of which I admit are somewhat unhealthy and that I’ve been trying so hard to improve. But the way she speaks about them so naturally gave me a sense of reassurance and strength. She seems completely at ease with everything that comes her way, yet she still fights against this cruel world in her own unique way. On one hand, I’m happy to have found someone who truly understands and shares the same thoughts as me. On the other, I see a different possibility: <strong>maybe I don’t always have to overcome everything. If I can’t change certain things, perhaps I can learn to live with them—while still living earnestly and fully</strong>.</p>
</section>
<section id="about-carer-transition" class="level3">
<h3 class="anchored" data-anchor-id="about-carer-transition">About [Carer Transition]…</h3>
<p>About three years ago, I finally made the move to transition from a non-quantitative background to a more quantitative career. Thanks to my partner—whom I met in 2019—his encouragement pushed me to step out of my comfort zone and try out new things. At that time, I felt like I had half given up on life, struggling to overcome PTSD while stuck in a job I hated.</p>
<p>However, I never imagined that I would embark on this quantitative journey. With a bachelor’s degree in pharmacy, my options for a master’s degree were quite limited. Initially, I pursued a Master of Public Health, but halfway through, I found myself increasingly drawn to statistics and programming. That was when I came across a new master’s program specifically designed for those with a health or medical background, even without prior experience in quantitative analysis or programming. I decided to take a leap of faith and give it a try.</p>
<p>I’ve never told my lecturer this, but it was one of his courses—<em>Statistical Modelling</em>—that solidified my determination to continue this path. As someone without any formal quantitative training, who often felt like I was <em>losing the will to live</em> whenever I encountered mathematical equations, learning quantitative concepts through statistical software was very helpful starting point. I never told him directly, but I believe I once sent him an email after the course ended, thanking him for “opening the world of statistics to me”.</p>
<p>I consider myself very lucky because I believe that 60–70% of my efforts have been rewarded in the end. Many times, hard work doesn’t lead to any recognition or results, so I feel incredibly fortunate and grateful that, so far, every project I’ve embarked on has had tangible outcomes. Even though some (or most) of my past works to date may not have been of good quality, that doesn’t bother me. What matters is that I’ve poured my heart and soul into every project, and I’m grateful for the opportunity to learn and grow—slowly but steadily—over time.</p>
<p>However, I have to say that the biggest challenge for someone without formal quantitative training is the lack of abstract, logical, systematic, and step-by-step thinking. This is the most noticeable difference I’ve observed between non-quantitative and quantitative individuals. It’s not just in research—quantitative thinkers tend to approach even the simplest life questions with a structured, logical, step-by-step mindset.</p>
<p>I’ve never tried to hide the fact that I’m not a very logical person. As a <em>Perceiving</em> type in the MBTI personality framework, I often do things without a plan and tend to jump from one thing to another. This often makes me wonder whether being an analyst is truly the right path for me. Despite that, I’m deeply grateful for every opportunity that has come my way and for the chance to keep learning. Through all of life’s ups and downs, I have never stopped discovering myself and searching for my true path.</p>
</section>
<section id="about-this-blog" class="level3">
<h3 class="anchored" data-anchor-id="about-this-blog">About [This Blog]…</h3>
<p>There’s no real meaning in writing this blog. However, I’ve come to realize that this is the first time I’ve ever written down—or even <em>talked</em> about—my PTSD. The fact that I can now put it into words so calmly means that time has already healed much of my pain.</p>
<p>I wrote this simply because I have a lot of free time to kill during my career break. I have so much free time now that I can <em>waste</em> an entire day writing this seemingly meaningless blog. Still, I believe that the ability—and the willingness—to express yourself, even when there’s no audience, is a kind of happiness. And for that, I am happy with the time I spent writing this down 🙂.</p>
</section>
<section id="about-一半人生" class="level3">
<h3 class="anchored" data-anchor-id="about-一半人生">About [一半人生]…</h3>
<p>There’s a song by Mayday that I really love, and its lyrics kinds of resonate with how I feel right now…</p>
<p>[在某個清晨 回望我一生 活得雖認真 卻微小如塵</p>
<p>想要唱首歌 去唱哭別人 最後卻是我 滿臉淚痕</p>
<p>早告別青春 活成了別人 經歷的時代 已如此陌生</p>
<p>年少時的話 又不敢承認 低頭在人海 浮浮沉沉</p>
<p>我的一半人生 飄蕩就像只風箏 如果命運是風 什麼又是我的繩</p>
<p>我的一半人生 冷暖就讓我自己過問 有熱愛有恨 有未知的前程</p>
<p>在某個清晨 回望我一生 活得雖認真 卻微小如塵</p>
<p>想要唱首歌 去唱哭別人 最後卻是我 滿臉淚痕</p>
<p>早告別青春 活成了別人 經歷的時代 已如此陌生</p>
<p>年少時的話 又不敢承認 低頭在人海 浮浮沉沉</p>
<p>我的一半人生 飄蕩就像只風箏 如果命運是風 什麼又是我的繩</p>
<p>我的一半人生 冷暖就讓我自己過問 有熱愛有恨 有未知的前程</p>
<p>我的一半人生 飄蕩就像只風箏 如果命運是風 什麼又是我的繩</p>
<p>我的一半人生 冷暖就讓我自己過問 有熱愛有恨 有未知的前程</p>
<p>有熱愛有恨 有未知的前程]</p>
<p>“My half-life, let me face its warmth and cold on my own. There is passion, there is hate. There is an unknown future.”</p>
<p>Yep, that makes a good ending to this seemingly meaningless blog.</p>
<p><br> <br> <br> <br> <br> <br> Weisi <br> 24 March 2025</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.weisichen\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 <a href="https://github.com/WeisiChen1995" <="" a=""> &nbsp; </a><a <br="">Website made using </a><a href="https://quarto.org/" target="_blank"><img src="https://quarto.org/favicon.png" width="12"> quarto</a><br>© 2025 Tangpai
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>